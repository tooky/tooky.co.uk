<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Steve Tooke - git</title>
  <id>http://tooky.co.uk/</id>
  <link href="http://tooky.co.uk/tags/git/"/>
  <link href="http://tooky.co.uk/tags/git.xml" rel="self"/>
  <updated>2010-04-08T00:00:00Z</updated>
  <entry>
    <title>Fixing "There was a problem with the editor 'vi'" for Git on Mac OS X Snow Leopard</title>
    <link rel="alternate" href="http://tooky.co.uk/there-was-a-problem-with-the-editor-vi-git-on-mac-os-x/"/>
    <id>http://tooky.co.uk/there-was-a-problem-with-the-editor-vi-git-on-mac-os-x/</id>
    <published>2010-04-08T00:00:00Z</published>
    <updated>2013-12-18T10:29:53+00:00</updated>
    <author>
      <name>Steve Tooke</name>
    </author>
    <content type="html">&lt;p&gt;I have had an annoying problem with git and vi. I like to use vim to edit my commit messages, but I&amp;rsquo;ve been hit with this annoying message every time I write the message and quit vim.&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;error: There was a problem with the editor 'vi'
&lt;/pre&gt;

&lt;p&gt;After a little bit of digging I found that this message is shown by git when the editor exits with a non-zero exit code. You can use &lt;code&gt;$?&lt;/code&gt; to see the exit code of last script or application.&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;$ vim     # then exit vim with :q immediately
$ echo $?
1
&lt;/pre&gt;

&lt;p&gt;I&amp;rsquo;m still not sure why vim is exiting with non-zero exit code, but it is definitely related to my &lt;code&gt;.vimrc&lt;/code&gt; - moving it to &lt;code&gt;.vimrc.bak&lt;/code&gt; seemed to fix the problem. I&amp;rsquo;m using the excellent &lt;a href="http://www.vim.org/scripts/script.php?script_id=2332"&gt;pathogen&lt;/a&gt; plugin to manage my vimfiles, so I plan to go through that and my installed plugins to find the cause of the problem.&lt;/p&gt;

&lt;p&gt;There is a fix though, I&amp;rsquo;m not sure what&amp;rsquo;s causing this, but I found a &lt;a href="http://groups.google.com/group/vim_mac/browse_thread/thread/0d33e2f2130867b0"&gt;post on the vim-mac mailing list&lt;/a&gt; which shows this:&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;$ vim          # and exit with :q
$ echo $?
1
$ /usr/bin/vim # and exit with :q
$ echo $?
0
$ which vim
/usr/bin/vim
&lt;/pre&gt;

&lt;p&gt;Running vim with &lt;code&gt;/usr/bin/vim&lt;/code&gt; seems to make it exit cleanly. So to fix the problem with git commit you just need to run this:&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;$ git config --global core.editor /usr/bin/vim
&lt;/pre&gt;

&lt;p&gt;I&amp;rsquo;d still like to get to the root of the problem, but this gets me my git commit messages back!&lt;/p&gt;
</content>
  </entry>
</feed>
