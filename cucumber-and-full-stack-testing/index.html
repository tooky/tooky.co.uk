<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <title>Steve Tooke - Cucumber and Full Stack Testing</title>
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Merriweather:300italic,300|Source+Sans+Pro:300|Source+Code+Pro' rel='stylesheet' type='text/css'>
    <link href="/stylesheets/reset.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/highlight.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/blog.css" media="screen" rel="stylesheet" type="text/css" />
  </head>
  <body>

  <div id='site-header'>
    <div id="site-header-wrapper">
      <h1>
        <a href="/">
          Steve Tooke
        </a>
      </h1>
      <h2>software development flavoured with agile, bdd, ruby and javascript</h2>
    </div>
  </div>
  <div id='main-wrapper'>
    <div id="main" role="main">
        <article>
    <header>
      <h1>Cucumber and Full Stack Testing</h1>
      <section class="author">
        <img class="avatar" src="/images/tooky-avatar.jpg">
        <p class="byline">by Steve Tooke</p>
        <time datetime="2013-01-18" itemprop="datePublished">January 18th, 2013</time>
      </section>
    </header>
    <section class="article-body">
      <p>There has been two similar questions asked on two different mailing lists I subscribe to (Corey Haines&#39; <a title="Build an app with Corey Haines" href="http://www.cleancoders.com/codecast/bawch-episode-1/show">BAWCH</a> mailing list, and <a href="http://rubyrogues.com/">Ruby Rogues</a> Parley list). Both of these lists are private so I thought it would be worthwhile posting my answer here.</p>

<p>Both of the questions were concerned with out-side-in development, full-stack integration testing, and how much of the application needs to be tested through the entire system.</p>

<p>Firstly consider why we write <a href="http://cukes.info/">cucumber</a> scenarios (or <a href="http://fitnesse.org/">fitnesse</a> test cases). These tests are business facing acceptance tests. They are a medium through which we can engage with the business people on our team and to help us understand how the system should behave. They give us an opportunity to check <em>our</em> understanding of what the system should do &mdash; to check the <em>business</em>&rsquo;s understanding of what the system should do. We automate these tests to give the business confidence that the system behaves as expected.</p>

<p>Full-stack, end-to-end, integration tests are there to give us confidence that the system fits together correctly, that we have all the different pieces in place, and they are able to talk to each other.</p>

<p>It&rsquo;s very easy to conflate these two concerns. I have worked on many systems where the business facing acceptance tests were also the end-to-end integration tests. The test runs end up being slow, and the tests are cumbersome to work with.</p>

<p>I&rsquo;ve been talking about this with <a href="https://twitter.com/mattwynne">Matt Wynne</a> and he drew the following diagram:</p>

<p><img alt="Business Facing Acceptance Tests vs End-To-End Tests" src="https://dl.dropboxusercontent.com/u/41915/tooky-images/business-facing-vs-end-to-end.png" /></p>

<p>The circle on the left represents the tests that we would write in cucumber (or fitnesse). The circle on the right the tests which exercise the whole system end-to-end. In the centre we have the intersection &mdash; our cucumber scenarios which we run end-to-end against the whole system.</p>

<p>The key thing is that your business acceptance tests do not all have to drive the whole system end-to-end. We only a need a few scenarios to go end-to-end to give us the confidence the system as a whole is working. We can also write system tests, that aren&rsquo;t part of the acceptance suite, to test specific integrations</p>

<p>Try to write acceptance tests that directly drive the domain objects. Use these to accurately describe your application&rsquo;s behaviour. Focus them on the behaviour by not having them integrate the UI and the database.</p>

    </section>
  </article>

    </div>

    <aside id="sidebar">
      <ol id="recent-articles">
        <h2>
          Recent Articles
          <a href="/feed.xml" class="feed" title="Subscribe!"><i class="fa fa-rss"></i></a>
        </h2>
        
          <li><a href="/the-cucumber-test-trap/">The Cucumber Test Trap</a> <span>Mar 29</span></li>
        
          <li><a href="/discovering-bdd/">Discovering BDD</a> <span>Dec 11</span></li>
        
          <li><a href="/learning-by-teaching/">Learning by Teaching</a> <span>Nov  6</span></li>
        
          <li><a href="/stop-writing-scenarios-that-test-everything-through-the-view/">Stop Writing Scenarios That Test Everything Through The View</a> <span>Oct 29</span></li>
        
          <li><a href="/this-gherkins-not-for-reading/">This Gherkin's Not For Reading</a> <span>Oct 24</span></li>
        
      </ol>

      <ul id="tags">
        <h2>Tags</h2>
        
          <li><a href="/tags/apprenticeship/">apprenticeship</a></a></li>
        
          <li><a href="/tags/atdd/">atdd</a></a></li>
        
          <li><a href="/tags/bdd/">bdd</a></a></li>
        
          <li><a href="/tags/bletchley-park/">bletchley park</a></a></li>
        
          <li><a href="/tags/coderetreat/">coderetreat</a></a></li>
        
          <li><a href="/tags/craft/">craft</a></a></li>
        
          <li><a href="/tags/craftsmanship/">craftsmanship</a></a></li>
        
          <li><a href="/tags/cucumber/">cucumber</a></a></li>
        
          <li><a href="/tags/development/">development</a></a></li>
        
          <li><a href="/tags/eden/">eden</a></a></li>
        
          <li><a href="/tags/fitnesse/">fitnesse</a></a></li>
        
          <li><a href="/tags/git/">git</a></a></li>
        
          <li><a href="/tags/github/">github</a></a></li>
        
          <li><a href="/tags/hacks/">hacks</a></a></li>
        
          <li><a href="/tags/javascript/">javascript</a></a></li>
        
          <li><a href="/tags/jekyll/">jekyll</a></a></li>
        
          <li><a href="/tags/kickstartac/">kickstartac</a></a></li>
        
          <li><a href="/tags/macosx/">macosx</a></a></li>
        
          <li><a href="/tags/oo/">oo</a></a></li>
        
          <li><a href="/tags/pairing/">pairing</a></a></li>
        
          <li><a href="/tags/practices/">practices</a></a></li>
        
          <li><a href="/tags/project/">project</a></a></li>
        
          <li><a href="/tags/retrospective/">retrospective</a></a></li>
        
          <li><a href="/tags/ruby/">ruby</a></a></li>
        
          <li><a href="/tags/sinatra/">sinatra</a></a></li>
        
          <li><a href="/tags/software/">software</a></a></li>
        
          <li><a href="/tags/solid/">solid</a></a></li>
        
          <li><a href="/tags/specification-by-example/">specification-by-example</a></a></li>
        
          <li><a href="/tags/tdd/">tdd</a></a></li>
        
          <li><a href="/tags/tools/">tools</a></a></li>
        
          <li><a href="/tags/training/">training</a></a></li>
        
          <li><a href="/tags/vim/">vim</a></a></li>
        
          <li><a href="/tags/xp/">xp</a></a></li>
        
      </ul>

      <div id="bio">
        <img class="avatar" src="/images/tooky-avatar.jpg">
        <h2>Steve Tooke</h2>
        <p>
        I am a programmer &mdash; consultant, trainer and coach &mdash;
        passionate about improving my craft and helping others improve
        theirs. I specialise in helping teams continue to deliver
        valuable software by improving their team practices and
        communication, and keeping their code maintainable.
        </p>
        <p>
        I co-organised Bootstrapd, a non-profit conference for
        bootstrapped startups in Europe. I am the co-founder of the
        Software Craftsmanship UK user group, and the HampshiRB ruby
        user group. I have spoken at the Scottish Ruby
        Conference and have run workshops at the London Software
        Craftsmanship Community. I am a member of the Cucumber core
        team.
        </p>
        <p>
        <a href="http://kickstartacademy.io">Kickstart Academy</a>
        </p>
      </div>
    </aside>
    <footer>
      <div id='site-footer'>
        <p>All content copyright Steve Tooke &copy; 2014 &middot; All rights reserved.</p>
        <p>Find me on <a href="http://twitter.com/tooky">Twitter</a> | <a href="https://plus.google.com/+SteveTooke-Heavies/">Google+</a></a></p>
    </div>
    </footer>
  </div>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-37664795-2', 'tooky.co.uk');
    ga('send', 'pageview');

  </script>
  </body>
</html>
